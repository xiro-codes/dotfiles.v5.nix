# vim: ft=cfg
# Cleaned Rifle configuration using system variables

#-------------------------------------------
# Web Sites & HTML
#-------------------------------------------
ext x?html?, has $BROWSER, X, flag f = $BROWSER -- "$@"
ext x?html?, has $EDITOR, terminal   = $EDITOR -- "$@"

#-------------------------------------------
# Misc Documents & Text
#-------------------------------------------
# Prioritize your chosen Editor and Pager
mime ^text,  label editor = $EDITOR -- "$@"
mime ^text,  label pager  = $PAGER -- "$@"

# Fallback for code files not caught by mime types
!mime ^text, label editor, ext xml|json|csv|tex|py|pl|rb|rs|js|sh|php|dart = $EDITOR -- "$@"

#--------------------------------------------
# Video/Audio with your System Player
#-------------------------------------------
# We assume 'mpv' or 'vlc' is in your extraPackages, or use a variable if you prefer
mime ^video|^audio, has mpv, X, flag f = mpv -- "$@"
mime ^video|^audio, has vlc, X, flag f = vlc -- "$@"

#-------------------------------------------
# Documents (PDF, etc)
#-------------------------------------------
# If you add a GUI_EDITOR or similar for docs, use it here
ext pdf, has zathura, X, flag f = zathura -- "$@"
ext pdf, has evince,  X, flag f = evince -- "$@"

#-------------------------------------------
# Images
#-------------------------------------------
# Use imv for Wayland/Hyprland setups
mime ^image, has imv, X, flag f = imv -- "$@"
mime ^image, has feh, X, flag f = feh -- "$@"

#-------------------------------------------
# Archives
#-------------------------------------------
ext 7z|zip|rar|tar|gz|bz2|xz, has atool = atool --list --each -- "$@" | $PAGER
ext 7z|zip|rar|tar|gz|bz2|xz, has atool = atool --extract --each -- "$@"

#-------------------------------------------
# Fallback Terminal Opener
#-------------------------------------------
# Instead of a long list, we use your defined Terminal variable
mime ^ranger/x-terminal-emulator, has $TERMINAL = $TERMINAL -e "$@"

#-------------------------------------------
# Generic file openers (Last Resort)
#-------------------------------------------
label open, has xdg-open = xdg-open "$@"

# Final fallback: Ask what to do
!mime ^text, !ext xml|json|csv|tex|py|pl|rb|rs|js|sh|php|dart = ask
